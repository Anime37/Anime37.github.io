<!DOCTYPE html>
<html>

<head>
    <title>Twitch Clip Player</title>
</head>

<body>
    <!-- Create an empty iframe with an ID -->
    <iframe id="clip_frame" style="width: 800px; height: 400px;"></iframe>

    <!-- Add an input field and a button for the user to input a new clip slug -->
    <input type="text" id="newClipSlug" placeholder="Enter A Clip Slug">
    <button onclick="updateClipSlug()">Update Clip</button>

    <script type="text/javascript">
        // Define your parent domains
        var parentDomains = ['anime37.github.io'];

        // Function to set the clip slug in local storage
        function setClipSlug(slug) {
            localStorage.setItem('clipSlug', slug);
        }

        // Function to get the clip slug from local storage
        function getClipSlug() {
            return localStorage.getItem('clipSlug');
        }

        // Function to update the clipSlug and load the iframe
        function updateClipSlug() {
            var newClipSlug = document.getElementById('newClipSlug').value;
            if (newClipSlug) { // Check if a new slug has been entered
                setClipSlug(newClipSlug);

                // Build the src URL for the iframe with autoplay=true
                var srcUrl = "https://clips.twitch.tv/embed?clip=" + newClipSlug + "&autoplay=true&parent=" + parentDomains.join('&parent=');

                // Set the iframe's src attribute with the updated URL
                document.getElementById('clip_frame').setAttribute('src', srcUrl);
            }
        }

        // Get the clip slug from local storage
        var clipSlug = getClipSlug();

        // If a slug is saved in local storage, load the clip
        if (clipSlug) {
            var srcUrl = "https://clips.twitch.tv/embed?clip=" + clipSlug + "&autoplay=true&parent=" + parentDomains.join('&parent=');
            document.getElementById('clip_frame').setAttribute('src', srcUrl);
        }
    </script>
</body>

</html>